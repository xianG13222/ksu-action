name: Build Kernel
on:
  push:
    branches:
	  - main
jobs:
  build:
	runs-on: ubuntu-18.04
	steps:
	  - name: Init Repo
		run: |
		  cd ~
		  git clone https://github.com/xianG13222/D8G_Kernel.git -b main --depth=1
	  - name: Build With Shell
	    run: |
		  cd ~/D8G_Kernel
		  bash build_full.sh
	  - name: Package With AnyKernel
		run: |
		  cd ~
		  cp D8G_Kernel/AnyKernel ./ -r
		  cd AnyKernel/
		  cp ../D8G_Kernel/out/arch/arm64/boot/Image.gz-dtb ./
	  - name : Upload artifact
	    uses: actions/upload-artifact@master
	    with:
		  name: D8G_Kernel.zip
		  path: /home/runner/AnyKernel/